# ==================================================================================================
# Kiro API Gateway - Environment Configuration
# ==================================================================================================
# Copy this file to .env and fill in your values
# ==================================================================================================

# ==================================================================================================
# Proxy Server Settings
# ==================================================================================================

# API key that clients must provide in Authorization header
# Format: Bearer <PROXY_API_KEY> or just <PROXY_API_KEY>
PROXY_API_KEY=changeme_proxy_secret

# Server port (supports dynamic port assignment for cloud platforms like Railway)
PORT=8000

# ==================================================================================================
# Kiro API Credentials (Required)
# ==================================================================================================

# Refresh token for obtaining access tokens from Kiro
# Get this from your Kiro IDE authentication
REFRESH_TOKEN=

# AWS CodeWhisperer Profile ARN (optional, for enterprise setups)
PROFILE_ARN=

# AWS region for Kiro API (default: us-east-1)
KIRO_REGION=us-east-1

# Path to credentials JSON file (alternative to REFRESH_TOKEN)
# Useful for loading credentials from a file instead of environment variables
# Example: /path/to/kiro-creds.json
KIRO_CREDS_FILE=

# ==================================================================================================
# Token Settings
# ==================================================================================================

# Seconds before token expiry to trigger refresh (default: 600 = 10 minutes)
TOKEN_REFRESH_THRESHOLD=600

# ==================================================================================================
# Retry Configuration
# ==================================================================================================

# Maximum retry attempts for failed requests (default: 3)
MAX_RETRIES=3

# Base delay between retries in seconds (uses exponential backoff)
BASE_RETRY_DELAY=1.0

# ==================================================================================================
# Timeout Settings
# ==================================================================================================

# Timeout waiting for first token from model (seconds)
# Increase for slow models like Opus (recommended: 120-180)
FIRST_TOKEN_TIMEOUT=120.0

# Maximum retries when first token times out
FIRST_TOKEN_MAX_RETRIES=3

# Timeout for reading each chunk in streaming mode (seconds)
# Increase for complex requests (recommended: 180-300)
STREAM_READ_TIMEOUT=300.0

# Timeout for non-streaming requests (seconds)
# Increase for complex requests (recommended: 600-1200)
NON_STREAM_TIMEOUT=900.0

# Timeout multiplier for slow models (Opus, etc.)
# Slow model timeouts = base_timeout * multiplier
SLOW_MODEL_TIMEOUT_MULTIPLIER=3.0

# ==================================================================================================
# Model Settings
# ==================================================================================================

# Model cache TTL in seconds (default: 3600 = 1 hour)
MODEL_CACHE_TTL=3600

# Default maximum input tokens
DEFAULT_MAX_INPUT_TOKENS=200000

# Maximum length for tool descriptions (characters)
# Longer descriptions may be truncated or moved to system prompt
TOOL_DESCRIPTION_MAX_LENGTH=10000

# ==================================================================================================
# Rate Limiting
# ==================================================================================================

# Requests per minute limit (0 = disabled)
RATE_LIMIT_PER_MINUTE=0

# ==================================================================================================
# Logging & Debug
# ==================================================================================================

# Log level: TRACE, DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Debug mode: off, errors, all
# - off: No debug logging
# - errors: Log only errors with full request/response
# - all: Log all requests and responses (verbose)
DEBUG_MODE=off
